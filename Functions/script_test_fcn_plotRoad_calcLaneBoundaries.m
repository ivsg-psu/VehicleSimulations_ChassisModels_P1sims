%% script_test_fcn_plotRoad_calcLaneBoundaries
% This is a script to exercise the function:
% fcn_plotRoad_calcLaneBoundaries.m
% This function was written on 2024_08_15 by S. Brennan, sbrennan@psu.edu



%% test 1 - basic edge calculation example, no figure
fig_num = 1;
figure(fig_num);

% Create data
xData = linspace(-2,20,100)';
yData = 2*xData+4;
XYdata = [xData yData];

% Test the function
[leftLaneBoundary_XY, rightLaneBoundary_XY] = fcn_plotRoad_calcLaneBoundaries(XYdata, (projectionDistance), (fig_num));

% Does the data have 2 columns?
assert(length(leftLaneBoundary_XY(1,:))== 2)
assert(length(rightLaneBoundary_XY(1,:))== 2)

% Do both have same number of rows?
assert(length(leftLaneBoundary_XY(:,1)) == length(rightLaneBoundary_XY(:,1)))

% Do both have same number of rows as input data?
assert(length(leftLaneBoundary_XY(:,1)) == length(XYdata(:,1)))

% Check that a figure was created
assert(ishandle(fig_num));





%% test 1 - basic edge calculation example, no figure
fig_num = 2;
figure(fig_num);
close(fig_num);

% Create data
xData = linspace(-2,20,100)';
yData = 2*xData+4;
XYdata = [xData yData];

% Test the function with empty figure number
[leftLaneBoundary_XY, rightLaneBoundary_XY] = fcn_plotRoad_calcLaneBoundaries(XYdata, (projectionDistance), ([]));

% Does the data have 2 columns?
assert(length(leftLaneBoundary_XY(1,:))== 2)
assert(length(rightLaneBoundary_XY(1,:))== 2)

% Do both have same number of rows?
assert(length(leftLaneBoundary_XY(:,1)) == length(rightLaneBoundary_XY(:,1)))

% Do both have same number of rows as input data?
assert(length(leftLaneBoundary_XY(:,1)) == length(XYdata(:,1)))

% Check that a figure was created
assert(~ishandle(fig_num));




%% test 900 - advanced edge calculation example
fig_num = 900;
figure(fig_num);
clf;

% Load data (from the following, in the plotCV2X library)
% csvFile = 'TestTrack_PendulumRSU_InstallTest_OuterLane1_2024_08_09.csv'; % Path to your CSV file
% [XYdata, tENU] = fcn_plotCV2X_loadDataFromFile(csvFile, (-1));
% disp(tENU(:,2:3))
XYdata = [
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.8700  138.6987
    462.9460  139.1098
    462.9545  139.1765
    462.9544  139.2654
    462.9713  139.3765
    462.9628  139.4876
    462.9713  139.6098
    462.9882  139.7432
    462.9881  139.9098
    462.9712  140.0876
    463.0049  140.2543
    463.1231  140.4765
    463.1315  140.6876
    463.1484  140.9098
    463.1484  141.1321
    463.1399  141.4098
    463.1061  141.6432
    463.0808  141.9321
    463.0808  142.1876
    463.0639  142.4654
    463.0723  142.7432
    463.3507  142.8209
    463.3591  143.1432
    463.3085  143.4432
    463.3085  143.7320
    463.2747  144.0432
    463.2409  144.3320
    463.2072  144.6431
    463.1987  144.9765
    463.1565  145.3098
    463.1228  145.6431
    463.1396  145.8542
    463.0889  146.2320
    463.0552  146.5542
    463.0215  146.9320
    462.9877  147.2653
    462.9454  147.6320
    462.8949  147.9764
    462.8442  148.3653
    462.7936  148.7431
    462.7429  149.1319
    462.8359  149.5320
    462.7937  149.9098
    462.7430  150.3209
    462.7008  150.7320
    462.6501  151.1542
    462.6164  151.5764
    462.5574  152.0320
    462.5067  152.5209
    462.4561  152.9764
    462.4054  153.4764
    462.1862  153.9320
    462.1271  154.4875
    462.0680  155.0097
    461.9921  155.5653
    461.9330  156.1208
    461.8570  156.6986
    461.7642  157.2763
    461.6714  157.8763
    461.5870  158.4652
    461.5110  159.0763
    461.5279  159.6763
    461.4014  160.3430
    461.2918  160.9652
    461.2074  161.5541
    461.0807  162.1874
    460.9627  162.7985
    460.8445  163.4096
    460.7180  164.0429
    460.5914  164.6763
    460.4648  165.3096
    460.3300  165.9985
    460.1780  166.6651
    460.0347  167.2763
    459.8996  167.9095
    459.7478  168.5540
    459.5959  169.1873
    459.4356  169.8540
    459.2669  170.5095
    459.0897  171.1873
    458.9210  171.8317
    458.7186  172.5317
    458.5246  173.2317
    458.3390  173.8761
    458.1449  174.5650
    457.9509  175.2539
    457.7484  175.9761
    457.5543  176.6539
    457.3518  177.3538
    457.1409  178.0538
    456.9216  178.7427
    456.7108  179.5094
    456.4746  180.2205
    456.2383  180.9205
    455.9937  181.6204
    455.7575  182.3093
    455.5043  183.0093
    455.2345  183.7093
    454.9814  184.3982
    454.7198  185.0870
    454.4246  185.8092
    454.1378  186.5759
    453.8088  187.2537
    453.5051  187.9425
    453.1761  188.6425
    452.8640  189.3425
    452.5350  190.0425
    452.1807  190.7203
    451.8263  191.4202
    451.4805  192.1202
    451.1009  192.8091
    450.7635  193.4646
    450.3417  194.1646
    449.9537  194.8535
    449.5403  195.5645
    449.1354  196.2534
    448.6967  196.9423
    448.2666  197.6534
    447.8363  198.3644
    447.3892  199.0644
    446.9337  199.7533
    446.9337  199.7533
    446.0311  201.1088
    445.5840  201.7865
    445.1032  202.4865
    444.6308  203.1754
    444.6308  203.1754
    443.6523  204.5531
    443.1545  205.2308
    443.1545  205.2308
    442.6400  205.9086
    442.1507  206.5752
    441.5687  207.2196
    441.0289  207.8863
    440.4890  208.5529
    439.9491  209.2195
    438.8525  210.5528
    438.8525  210.5528
    438.2789  211.2083
    437.7137  211.8528
    437.1147  212.5194
    436.5328  213.1749
    435.9929  213.8304
    435.3686  214.4971
    434.7444  215.1304
    434.1033  215.7748
    433.4622  216.4303
    432.8127  217.0524
    432.1378  217.6969
    431.4462  218.2968
    430.7713  218.9190
    430.0712  219.5301
    429.4133  220.1745
    428.6625  220.7523
    427.9455  221.3522
    427.2116  221.9299
    426.4609  222.5077
    425.7101  223.0854
    424.9510  223.6520
    424.1833  224.2075
    423.4073  224.7519
    422.6228  225.2852
    421.8636  225.8296
    421.0369  226.3518
    420.2271  226.8740
    419.4173  227.3961
    418.5991  227.8961
    417.7809  228.3960
    416.9458  228.8960
    416.1191  229.3737
    415.2841  229.8515
    414.4490  230.3292
    413.6392  230.8625
    412.7704  231.3069
    411.9016  231.7735
    411.0496  232.2402
    410.1892  232.6845
    409.3203  233.1178
    408.4347  233.5400
    407.5574  233.9844
    406.6802  234.3955
    405.7860  234.8176
    404.7907  235.2620
    403.8713  235.6176
    402.9687  236.0064
    402.0577  236.4063
    401.1383  236.7841
    400.2104  237.1396
    399.2657  237.5062
    398.3210  237.8395
    397.3678  238.1950
    396.3978  238.5172
    395.4362  238.8504
    394.4408  239.1504
    393.4539  239.4615
    392.4585  239.7614
    391.4463  240.0391
    390.4425  240.3280
    389.4388  240.5946
    388.4013  240.8501
    387.3806  241.0834
    386.3600  241.3167
    385.2634  241.5832
    384.1921  241.7610
    383.1293  241.9720
    382.0834  242.1387
    381.0121  242.3275
    379.9409  242.4941
    378.8612  242.6385
    377.7730  242.7718
    376.6934  242.8939
    375.6052  243.0161
    374.5170  243.1827
    373.3784  243.2493
    372.2734  243.3270
    371.1600  243.3714
    370.0297  243.4380
    368.9078  243.4713
    367.7859  243.4824
    366.6472  243.5045
    365.5085  243.4934
    364.3614  243.4822
    363.1973  243.5044
    362.0164  243.4265
    360.8608  243.3931
    359.7136  243.3375
    358.5580  243.2597
    357.4025  243.1597
    356.2300  243.0596
    355.0744  242.9373
    353.9020  242.8151
    352.7379  242.6817
    351.5064  242.6927
    350.3255  242.5149
    349.1446  242.3371
    347.9552  242.1703
    346.7912  241.9814
    345.5851  241.8036
    344.4042  241.6257
    343.2317  241.4257
    342.0424  241.2145
    340.8362  240.9811
    339.6468  240.7700
    338.4322  240.5032
    337.2429  240.2365
    336.0536  239.9809
    334.8558  239.7365
    333.6581  239.4697
    332.4603  239.1919
    331.2626  238.9030
    330.0732  238.6474
    328.8671  238.3473
    327.6017  238.1028
    326.4040  237.7916
    325.1978  237.4915
    323.9916  237.1693
    322.7686  236.8470
    321.5792  236.5359
    320.3646  236.1914
    319.1416  235.8691
    317.9185  235.5246
    316.6870  235.1690
    315.3964  234.8690
    314.1649  234.5133
    312.9419  234.1577
    311.7019  233.8132
    310.4788  233.4576
    309.2389  233.1243
    307.9990  232.7909
    306.7422  232.4242
    305.4854  232.0908
    304.2370  231.7352
    302.9717  231.4018
    301.7149  231.0461
    300.4413  230.6795
    299.1760  230.3461
    297.9023  229.9682
    296.6287  229.6015
    296.6287  229.6015
    295.3634  229.2459
    294.0813  228.8570
    292.7908  228.4903
    291.4918  228.1124
    290.2012  227.8013
    288.9106  227.4123
    287.6117  227.0345
    286.3127  226.6900
    284.9968  226.3344
    283.6810  225.9455
    282.3820  225.5788
    281.0662  225.2009
    279.7419  224.8231
    278.4091  224.4453
    277.0764  224.0564
    275.7521  223.6674
    274.4110  223.2785
    271.7287  222.5117
    271.7287  222.5117
    270.3875  222.1450
    269.0463  221.7450
    267.6967  221.3671
    266.3471  220.9782
    265.0060  220.6004
    263.6479  220.2336
    262.2814  219.8447
    260.9066  219.4558
    259.5232  219.0890
    258.1399  218.6890
    256.7734  218.3001
    255.3901  217.9112
    253.9983  217.5111
    252.6150  217.1333
    251.2232  216.7444
    249.8398  216.3332
    248.4396  215.9442
    247.0479  215.5664
    245.6392  215.1664
    244.2390  214.7774
    242.8304  214.3774
    241.4217  213.9884
    238.5876  213.1995
    238.5876  213.1995
    237.1705  212.7772
    235.7450  212.3772
    234.3110  211.9660
    232.8855  211.5659
    231.4347  211.1770
    230.0091  210.7881
    228.5752  210.3658
    227.1497  209.9769
    225.7157  209.5879
    224.2733  209.1990
    222.8394  208.7990
    221.4054  208.3878
    219.9462  207.9767
    218.4869  207.5655
    217.0361  207.1543
    215.5769  206.7432
    214.1260  206.3098
    212.6668  205.8987
    211.1991  205.4986
    209.7314  205.0875
    208.2721  204.6541
    206.7876  204.2429
    205.2946  203.8096
    203.8353  203.3873
    202.3507  202.9539
    200.8746  202.5316
    199.3985  202.1094
    197.9139  201.6538
    196.4293  201.2315
    194.9448  200.7870
    193.4686  200.3315
    191.9588  199.8870
    190.4742  199.4536
    188.9896  199.0202
    187.5051  198.5646
    186.0037  198.1424
    184.5022  197.6868
    182.9924  197.2312
    181.4994  196.7978
    179.9895  196.3534
    178.4796  195.8977
    176.9950  195.4088
    175.4767  194.9754
    173.9837  194.5199
    172.4823  194.0976
    170.9809  193.6531
    169.4963  193.2198
    167.9949  192.7864
    166.5103  192.3419
    165.0088  191.9086
    163.5158  191.4863
    161.9975  191.0307
    160.5130  190.6085
    159.0200  190.2084
    157.5354  189.7751
    156.0508  189.3306
    154.5578  188.9306
    153.0817  188.4972
    151.5887  188.0749
    150.1041  187.6527
    148.6280  187.2415
    147.1350  186.8082
    145.6588  186.3859
    144.1743  185.9970
    142.6897  185.5636
    141.2136  185.1303
    139.7206  184.7303
    138.2360  184.3191
    136.7683  183.8746
    135.2922  183.4746
    133.8076  183.0301
    132.3146  182.6079
    130.8384  182.1856
    129.3539  181.7523
    127.8609  181.3300
    126.3763  180.9078
    124.8917  180.4855
    123.4156  180.0522
    121.9310  179.6299
    120.4465  179.1966
    118.9450  178.7632
    117.4773  178.3299
    116.0012  177.8854
    114.4997  177.4409
    113.0067  177.0187
    111.5137  176.5853
    110.0291  176.1297
    108.5277  175.6964
    107.0600  175.2630
    105.5585  174.8297
    104.0655  174.3852
    102.5978  173.9740
    101.0964  173.5407
    99.6034  173.1073
    98.1104  172.6851
    96.6173  172.2406
    95.1075  171.8184
    93.6229  171.3851
    92.1214  170.9739
    90.6200  170.5517
    89.1186  170.1294
    87.6002  169.7739
    86.0988  169.3516
    84.6226  168.9405
    83.1296  168.5182
    81.6366  168.0960
    80.1520  167.6960
    78.6675  167.2737
    77.1745  166.8848
    75.6983  166.4515
    74.2222  166.0626
    72.7292  165.6403
    71.2615  165.2514
    69.7853  164.8403
    68.3176  164.4403
    66.8499  164.0292
    65.3822  163.6291
    63.9145  163.2291
    62.4552  162.8180
    61.0044  162.4291
    59.5535  162.0180
    58.1027  161.6068
    56.6519  161.2180
    55.2095  160.7957
    53.7755  160.3846
    52.3331  159.9846
    50.9076  159.5623
    49.4820  159.1512
    48.0565  158.7290
    46.6225  158.3179
    45.2054  157.9068
    43.7715  157.4956
    42.3544  157.0845
    40.9457  156.6734
    39.5286  156.2512
    38.1115  155.8734
    36.7113  155.4400
    35.3111  155.0178
    33.9108  154.5956
    32.5190  154.1956
    31.1273  153.7511
    29.7186  153.3622
    28.3352  152.9289
    26.9519  152.5289
    25.5769  152.0955
    24.2020  151.6844
    22.8187  151.2622
    21.4437  150.8399
    20.0604  150.4177
    18.7023  150.0177
    17.3358  149.5955
    15.9694  149.1510
    14.6113  148.7288
    13.2533  148.3288
    11.8952  147.9066
    10.5456  147.4732
    9.1960  147.0621
    7.8548  146.6621
    6.5052  146.2399
    5.1640  145.8177
    3.8312  145.4066
    2.4816  144.9510
    -0.1755  144.1177
    -1.4913  143.6954
    -2.8156  143.2621
    -4.1315  142.8177
    -5.4474  142.3843
    -6.7464  141.9510
    -8.0539  141.4954
    -9.3444  141.0510
    -10.6519  140.6288
    -11.9256  140.1621
    -13.2077  139.7066
    -14.4983  139.2288
    -15.7720  138.7510
    -17.0541  138.2843
    -18.3194  137.7955
    -19.5678  137.2844
    -20.8331  136.7955
    -23.3552  135.7732
    -24.5783  135.2177
    -25.8182  134.6733
    -27.0413  134.1177
    -28.2728  133.5510
    -29.4875  132.9844
    -30.6937  132.4066
    -33.1146  131.2400
    -34.3124  130.6511
    -35.5608  130.0622
    -36.7080  129.4178
    -37.8973  128.8400
    -40.2339  127.5622
    -41.3979  126.9178
    -44.8057  124.9289
    -45.9360  124.2623
    -47.0748  123.6289
    -48.1629  122.9067
    -49.2595  122.1956
    -50.3476  121.4845
    -51.4273  120.7623
    -52.5070  120.0290
    -53.5783  119.2957
    -54.6242  118.5401
    -55.6786  117.7957
    -56.7246  117.0291
    -57.7790  116.2957
    -58.7997  115.4957
    -58.7997  115.4957
    -59.8034  114.7291
    -61.8026  113.1402
    -62.7811  112.3291
    -63.7764  111.5403
    -64.7465  110.7292
    -65.7165  109.9181
    -65.7165  109.9181
    -66.6781  109.0848
    -67.7325  108.3070
    -68.6773  107.4737
    -69.6305  106.6515
    -70.5752  105.8071
    -71.5284  104.9737
    -74.2951  102.3960
    -75.2146  101.5516
    -77.0787   99.8294
    -79.7105   97.1628
    -80.5709   96.2739
    -87.2854   88.9407
    -92.7177   82.2408
    -96.4798   77.4298
    -97.2053   76.4520
    -97.9307   75.4521
    -98.6477   74.4632
    -100.7565   71.4632
    -102.0387   69.4411
    -110.2463   54.8969
    -112.3130   50.5414
    -114.6244   44.9859
    -118.6397   33.5083
    -119.6097   30.0195
    -119.8797   28.8306
    -120.5714   26.4307
    -120.7992   25.2529
    -121.0354   24.0529
    -121.2716   22.8530
    -121.9465   19.2308
    -122.3008   16.7753
    -122.5286   15.5975
    -122.6720   14.3642
    -122.8323   13.1198
    -122.9673   11.9087
    -123.0938   10.6976
    -123.2288    9.4754
    -123.3722    8.2532
    -123.4819    7.0087
    -123.5662    5.7643
    -123.6422    4.5421
    -123.8953    2.0755
    -123.9543    0.8533
    -124.0471   -0.4023
    -124.1231   -1.6356
    -124.2581   -4.1356
    -124.3340   -5.3689
    -124.4015   -6.6133
    -124.7221  -12.9132
    -124.8065  -15.4354
    -124.8318  -16.7021
    -124.8319  -17.9798
    -124.8825  -21.8131
    -124.8488  -23.0909
    -124.5790  -29.4686
    -121.6776  -50.8461
    -121.3992  -52.0683
    -121.1040  -53.3128
    -119.2652  -60.6460
    -116.6251  -68.9904
    -116.2286  -70.1682
    -115.4020  -72.4904
    -114.9887  -73.6570
    -114.5501  -74.7903
    -114.1115  -75.9570
    -113.6391  -77.1014
    -113.1752  -78.2459
    -112.7112  -79.3792
    -112.2473  -80.5125
    -111.7496  -81.6570
    -110.2651  -85.0903
    -109.7421  -86.2236
    -108.6624  -88.4791
    -108.1141  -89.6013
    -105.8620  -94.0902
    -105.2378  -95.1791
    -104.0315  -97.3346
    -88.8819 -119.8012
    -87.3045 -121.7123
    -85.7102 -123.5567
    -84.9679 -124.5123
    -84.1413 -125.4123
    -82.4964 -127.2123
    -79.1392 -130.7456
    -77.4437 -132.4456
    -76.6423 -133.3345
    -75.7735 -134.1456
    -74.0442 -135.7789
    -72.2981 -137.3900
    -71.4293 -138.2011
    -70.5351 -138.9789
    -66.0897 -142.8678
    -65.1787 -143.6123
    -63.3229 -145.0900
    -58.7172 -148.7678
    -57.7472 -149.4234
    -56.8024 -150.1011
    -55.8408 -150.7900
    -54.8960 -151.4567
    -52.9727 -152.8011
    -51.0157 -154.0789
    -50.0372 -154.7233
    -48.0971 -155.9567
    -47.1017 -156.5789
    -46.0895 -157.1789
    -45.0941 -157.7900
    -44.0734 -158.3900
    -43.0780 -158.9789
    -42.0658 -159.5789
    -41.0367 -160.1456
    -39.9991 -160.7233
    -39.0206 -161.3122
    -37.9746 -161.8345
    -36.9371 -162.4011
    -35.8911 -162.9344
    -34.8366 -163.4678
    -33.7738 -164.0011
    -32.7109 -164.5344
    -31.6481 -165.0678
    -30.5683 -165.5456
    -29.4970 -166.0567
    -28.4679 -166.5900
    -27.3460 -167.0567
    -26.2325 -167.5456
    -25.1528 -168.0345
    -24.0393 -168.4789
    -22.9343 -168.9344
    -21.8124 -169.4011
    -20.6820 -169.8567
    -19.5601 -170.2789
    -18.4129 -170.7122
    -17.3331 -171.1789
    -16.1691 -171.5567
    -14.9965 -171.9789
    -13.8577 -172.3789
    -12.7021 -172.7789
    -11.5296 -173.1678
    -10.3655 -173.5344
    -9.2014 -173.9233
    -8.0120 -174.2678
    -6.8310 -174.6344
    -5.6838 -175.0233
    -4.4775 -175.3233
    -3.2966 -175.6456
    -2.0819 -175.9567
    -2.0819 -175.9567
    -0.8756 -176.2789
    0.3391 -176.5566
    1.5285 -176.8455
    2.7516 -177.1233
    3.9663 -177.3900
    5.2064 -177.6455
    6.3789 -177.9344
    7.6273 -178.1455
    8.8589 -178.3677
    10.0989 -178.5900
    11.3474 -178.8011
    12.5874 -179.0011
    13.8358 -179.1899
    15.0843 -179.3455
    16.3412 -179.5011
    17.5980 -179.6566
    18.8212 -179.8344
    20.0865 -179.9233
    21.3518 -180.0344
    22.6256 -180.1566
    23.8740 -180.2344
    25.1562 -180.3121
    26.4300 -180.3788
    27.7122 -180.4343
    28.9775 -180.4677
    30.2428 -180.5121
    31.4997 -180.5344
    32.7734 -180.5010
    34.0556 -180.5232
    35.3125 -180.5010
    36.5863 -180.4899
    37.8685 -180.4565
    39.1506 -180.4121
    40.4160 -180.3676
    41.6897 -180.3121
    42.9719 -180.2343
    44.2119 -180.2010
    45.4941 -180.0787
    46.7679 -179.9676
    48.0500 -179.8787
    49.3069 -179.7343
    50.5807 -179.6009
    51.8460 -179.4787
    53.1282 -179.3120
    54.3935 -179.1565
    55.6673 -178.9898
    56.9073 -178.8453
    58.1726 -178.6564
    59.4379 -178.4453
    60.6948 -178.2564
    61.9770 -178.0231
    63.2254 -177.8008
    64.4907 -177.5786
    65.7392 -177.3231
    67.0045 -177.0786
    68.2698 -176.8119
    69.4845 -176.5897
    70.7329 -176.2786
    71.9898 -175.9897
    73.2467 -175.7008
    74.4952 -175.3786
    75.7436 -175.0452
    76.9920 -174.7341
    78.2574 -174.4230
    79.4889 -174.0674
    80.7374 -173.7230
    81.9689 -173.3674
    83.2005 -172.9674
    84.4405 -172.5785
    85.6805 -172.1896
    86.9121 -171.8118
    88.1437 -171.4007
    89.3752 -170.9562
    90.5984 -170.5673
    91.8299 -170.1340
    93.0362 -169.6896
    94.2509 -169.2562
    95.4656 -168.7451
    96.6887 -168.2895
    97.9034 -167.8006
    99.1181 -167.3006
    100.3328 -166.8117
    101.5391 -166.2895
    102.7454 -165.7561
    103.9601 -165.1895
    105.1579 -164.6450
    106.3388 -164.1339
    107.5282 -163.5339
    108.7345 -162.9450
    109.9154 -162.3672
    111.1301 -161.7450
    112.3111 -161.1450
    113.4836 -160.4783
    114.6646 -159.8449
    115.8539 -159.1894
    117.0265 -158.5227
    118.1737 -157.8894
    119.3378 -157.1894
    120.5018 -156.5005
    121.6659 -155.8005
    122.8215 -155.0671
    124.0025 -154.3560
    125.1581 -153.6560
    126.2885 -152.9004
    127.4357 -152.1449
    128.5745 -151.3782
    129.7133 -150.6560
    130.8352 -149.8448
    131.9739 -149.0671
    133.0705 -148.2337
    134.2346 -147.4670
    135.3480 -146.6559
    136.4615 -145.8448
    137.5581 -145.0226
    138.6885 -144.2226
    139.8272 -143.3781
    140.9575 -142.6003
    142.0288 -141.7337
    143.1592 -140.9225
    144.2895 -140.0447
    145.4114 -139.2225
    146.5333 -138.3892
    147.6468 -137.5558
    148.7687 -136.7114
    149.8821 -135.8780
    151.0293 -135.0225
    152.1428 -134.1891
    153.2731 -133.3558
    154.4119 -132.5002
    155.5422 -131.6446
    156.6304 -130.7780
    157.7776 -129.9335
    158.9248 -129.0779
    160.0551 -128.2113
    161.1770 -127.3113
    162.3242 -126.4557
    163.4292 -125.5557
    164.5511 -124.6668
    165.7236 -123.8445
    166.8117 -122.9334
    167.9758 -122.1001
    169.1146 -121.2112
    170.2702 -120.3445
    171.4174 -119.5222
    172.5393 -118.6222
    173.6865 -117.7555
    174.8337 -116.8777
    175.9640 -116.0222
    177.1112 -115.1110
    178.2415 -114.2555
    179.3887 -113.3888
    180.5190 -112.4999
    181.6578 -111.6332
    182.8218 -110.7665
    183.9522 -109.8887
    185.0825 -109.0109
    186.2465 -108.1220
    187.3684 -107.2664
    188.4819 -106.4109
    189.6375 -105.4886
    190.7931 -104.6441
    191.9319 -103.7553
    193.0960 -102.9108
    194.2432 -102.0441
    195.3735 -101.1441
    196.5291 -100.2441
    197.6847  -99.3885
    198.8403  -98.4996
    199.9960  -97.6329
    201.1094  -96.7551
    202.2819  -95.8884
    203.4291  -94.9884
    204.5763  -94.0995
    205.7488  -93.2328
    206.9128  -92.3661
    208.0600  -91.4550
    209.2156  -90.5660
    210.3628  -89.6549
    211.5438  -88.7771
    212.6994  -87.8660
    213.8550  -86.9771
    215.0275  -86.1104
    216.1746  -85.2326
    217.3471  -84.3214
    218.5027  -83.4103
    219.6837  -82.5214
    220.8140  -81.6436
    221.9696  -80.7436
    223.1421  -79.8435
    224.3146  -78.8991
    225.4871  -78.0213
    226.6511  -77.1435
    226.6511  -77.1435
    227.8236  -76.2101
    228.9877  -75.2990
    230.1433  -74.3545
    231.3158  -73.4434
    232.4967  -72.5433
    233.6945  -71.6211
    234.8586  -70.7211
    236.0310  -69.8321
    237.1866  -68.9099
    238.3760  -68.0543
    239.5485  -67.0987
    240.7294  -66.2320
    241.9188  -65.3209
    243.0913  -64.4320
    244.2806  -63.4875
    245.4700  -62.5764
    246.6509  -61.6541
    247.8402  -60.7541
    249.0043  -59.7985
    250.1937  -58.8763
    251.3830  -57.9984
    252.5723  -57.0540
    253.7617  -56.1650
    254.9426  -55.2428
    256.1489  -54.3317
    257.3466  -53.4427
    258.5360  -52.5205
    259.7253  -51.6093
    260.9400  -50.7315
    262.1293  -49.7982
    263.3271  -48.9203
    264.5165  -47.9981
    265.6889  -47.0536
    266.8951  -46.1425
    268.0676  -45.2202
    269.2738  -44.3313
    270.4632  -43.4090
    271.6694  -42.4757
    272.8925  -41.5979
    274.0650  -40.6534
    275.2375  -39.7200
    276.4436  -38.7977
    277.6414  -37.8977
    278.8645  -36.9977
    280.0370  -36.0421
    281.2348  -35.1421
    282.4579  -34.2198
    283.6388  -33.3309
    284.8366  -32.3753
    286.0343  -31.4864
    287.2152  -30.5419
    288.4215  -29.5863
    289.6024  -28.6751
    290.8171  -27.7418
    291.9810  -26.8084
    293.1789  -25.8972
    294.3682  -24.9417
    295.5575  -24.0083
    296.7806  -23.0971
    297.9615  -22.1749
    299.1509  -21.2304
    300.3655  -20.3526
    301.5464  -19.3859
    302.7358  -18.4192
    303.9420  -17.5080
    305.1398  -16.5746
    306.3544  -15.6413
    307.5185  -14.6968
    308.7247  -13.7856
    309.9140  -12.7856
    312.3180  -10.9411
    312.3180  -10.9411
    313.4989  -10.0188
    314.7135   -9.0521
    315.9028   -8.1632
    317.1091   -7.1965
    318.2815   -6.2520
    319.4793   -5.2964
    320.6517   -4.3741
    321.8326   -3.4407
    323.0473   -2.5074
    324.2282   -1.5851
    325.4260   -0.6739
    326.6153    0.2817
    327.8131    1.1928
    328.9855    2.1151
    330.1918    3.0040
    331.3558    3.9374
    332.5536    4.8485
    333.7260    5.7708
    334.9238    6.6931
    336.1131    7.6153
    337.2856    8.5154
    338.4580    9.4265
    339.6474   10.3710
    340.8198   11.2600
    342.0260   12.1489
    343.2069   13.0267
    344.4047   13.9157
    345.5856   14.8046
    346.7833   15.6935
    347.9474   16.5936
    349.1451   17.4714
    350.3429   18.3603
    351.5154   19.2826
    353.8772   21.0494
    355.0412   21.9272
    356.2390   22.8050
    357.4199   23.6940
    358.5839   24.5829
    358.5839   24.5829
    360.9457   26.3274
    362.1434   27.1719
    362.1434   27.1719
    364.4714   28.9165
    364.4714   28.9165
    366.8248   30.6610
    368.0226   31.5277
    369.1613   32.3945
    369.1613   32.3945
    370.3169   33.2723
    371.4977   34.1279
    372.6618   35.0168
    373.8258   35.8613
    374.9645   36.7614
    376.1454   37.6170
    377.2925   38.4837
    378.4228   39.3615
    379.5700   40.2060
    380.7340   41.0505
    381.8558   41.9283
    383.0114   42.7506
    384.1501   43.5951
    385.2888   44.4507
    386.3938   45.3286
    387.5241   46.1730
    388.6459   47.0064
    389.7593   47.8287
    390.8727   48.7065
    391.9946   49.5177
    393.1080   50.3844
    394.2298   51.2178
    395.3179   52.0401
    396.3976   52.8735
    397.5110   53.7068
    398.5907   54.5180
    399.6788   55.3514
    400.7669   56.1848
    401.8634   57.0071
    402.9431   57.8404
    404.0143   58.6405
    405.0940   59.4739
    406.1736   60.2961
    407.2196   61.1295
    408.3329   61.9962
    409.3874   62.7963
    410.4670   63.6297
    411.4708   64.4186
    412.5336   65.2298
    413.5626   66.0632
    414.6086   66.8966
    415.6461   67.7411
    416.6582   68.5633
    417.6704   69.4301
    418.6910   70.3079
    419.6610   71.1746
    420.6648   72.0080
    421.6095   72.8858
    422.5710   73.7525
    423.5410   74.6192
    424.4857   75.5304
    425.4051   76.4082
    426.3667   77.2638
    427.2777   78.1528
    428.2223   79.0306
    429.1248   79.9306
    430.0104   80.8418
    430.9045   81.7418
    431.8070   82.6419
    432.6842   83.5419
    433.5530   84.4419
    434.3965   85.3864
    435.2399   86.3087
    436.1003   87.2310
    436.9690   88.1643
    437.7619   89.0977
    438.5716   90.0644
    439.3645   91.0089
    440.1742   91.9645
    440.9587   92.8979
    441.7093   93.8646
    442.4431   94.7757
    443.1601   95.7202
    443.8686   96.5980
    444.5433   97.5092
    445.1759   98.3870
    445.8254   99.2648
    446.4242  100.1426
    447.0231  100.9760
    447.5798  101.7982
    448.1365  102.6316
    448.6763  103.4205
    449.1908  104.1983
    449.6884  104.9761
    450.2282  105.7872
    450.6162  106.5317
    451.0380  107.2762
    451.4512  107.9984
    451.8223  108.6873
    452.1766  109.3873
    452.5224  110.0651
    452.8682  110.7540
    453.2140  111.3874
    453.4839  112.0096
    453.8972  112.7208
    454.1081  113.2652
    454.4201  113.8541
    454.6900  114.4430
    454.6900  114.4430
    454.9346  115.0097
    455.4154  116.1097
    455.6515  116.6208
    455.8539  117.1875
    456.0732  117.6875
    456.3600  118.2542
    456.5118  118.7098
    456.7142  119.1876
    456.8998  119.6653
    457.0601  120.1098
    457.2624  120.5987
    457.4312  120.9987
    457.5661  121.4209
    457.7179  121.8876
    457.9203  122.2987
    458.0806  122.7543
    458.0806  122.7543
    458.3167  123.5432
    458.3167  123.5432
    458.4685  123.9099
    458.5782  124.2877
    458.6878  124.6877
    ];

save(cat(2,'Data',filesep,'SampleCV2XData.mat'),'XYdata');

% Test the function
csvFile = 'TestTrack_PendulumRSU_InstallTest_OuterLane1_2024_08_09.csv'; % Path to your CSV file
projectionDistance = [];
[leftLaneBoundary_XY, rightLaneBoundary_XY] = fcn_plotRoad_calcLaneBoundaries(XYdata, (projectionDistance), (fig_num));
title(sprintf('Example of fcn_plotRoad_calcLaneBoundaries'), 'Interpreter','none','FontSize',12);
subtitle(sprintf('File: %s',csvFile), 'Interpreter','none','FontSize',12);

% Does the data have 2 columns?
assert(length(leftLaneBoundary_XY(1,:))== 2)
assert(length(rightLaneBoundary_XY(1,:))== 2)

% Do both have same number of rows?
assert(length(leftLaneBoundary_XY(:,1)) == length(rightLaneBoundary_XY(:,1)))

% Do both have same number of rows as input data?
assert(length(leftLaneBoundary_XY(:,1)) == length(XYdata(:,1)))

% Check that a figure was created
assert(ishandle(fig_num));



%% Speed test

% Create data
xData = linspace(-2,20,100)';
yData = 2*xData+4;
XYdata = [xData yData];

fig_num=[];
REPS=5;
minTimeSlow=Inf;
maxTimeSlow=-Inf;
tic;

% Slow mode calculation - code copied from plotVehicleXYZ
for i=1:REPS
    tstart=tic;
    [leftLaneBoundary_XY, rightLaneBoundary_XY] = fcn_plotRoad_calcLaneBoundaries(XYdata, (projectionDistance), (fig_num));
    telapsed=toc(tstart);
    minTimeSlow=min(telapsed,minTimeSlow);
    maxTimeSlow=max(telapsed,maxTimeSlow);
end
averageTimeSlow=toc/REPS;
% Slow mode END

% Fast Mode Calculation
fig_num = -1;
minTimeFast = Inf;
tic;
for i=1:REPS
    tstart = tic;
    [leftLaneBoundary_XY, rightLaneBoundary_XY] = fcn_plotRoad_calcLaneBoundaries(XYdata, (projectionDistance), (fig_num));
    telapsed = toc(tstart);
    minTimeFast = min(telapsed,minTimeFast);
end
averageTimeFast = toc/REPS;
% Fast mode END

% Display Console Comparison
if 1==1
    fprintf(1,'\n\nComparison of fcn_plotCV2X_loadDataFromFile without speed setting (slow) and with speed setting (fast):\n');
    fprintf(1,'N repetitions: %.0d\n',REPS);
    fprintf(1,'Slow mode average speed per call (seconds): %.5f\n',averageTimeSlow);
    fprintf(1,'Slow mode fastest speed over all calls (seconds): %.5f\n',minTimeSlow);
    fprintf(1,'Fast mode average speed per call (seconds): %.5f\n',averageTimeFast);
    fprintf(1,'Fast mode fastest speed over all calls (seconds): %.5f\n',minTimeFast);
    fprintf(1,'Average ratio of fast mode to slow mode (unitless): %.3f\n',averageTimeSlow/averageTimeFast);
    fprintf(1,'Fastest ratio of fast mode to slow mode (unitless): %.3f\n',maxTimeSlow/minTimeFast);
end
%Assertion on averageTime NOTE: Due to the variance, there is a chance that
%the assertion will fail.
assert(averageTimeFast<2*averageTimeSlow);

